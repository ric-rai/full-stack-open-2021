(this.webpackJsonpfullstackopen=this.webpackJsonpfullstackopen||[]).push([[0],{45:function(e,n,t){},46:function(e,n,t){"use strict";t.r(n);var r=t(21),c=t.n(r),u=t(11),a=t(3),o=t(4),i=t(2),l=t(6),d=t.n(l),b="/api/persons",j=function(e){return"".concat(b,"/").concat(e)},f=function(){return d.a.get(b).then((function(e){return e.data}))},s=function(e){return d.a.post(b,e).then((function(e){return e.data}))},h=function(e){return d.a.delete(j(e)).then((function(e){return e.data}))},O=function(e){return d.a.put(j(e.id),e).then((function(e){return e.data}))},m=t(0),v=function(e){var n=e.onSubmitHandler,t=e.inputs;return Object(m.jsxs)("form",{onSubmit:n,children:[t.map((function(e){return Object(i.createElement)(p,Object(o.a)(Object(o.a)({},e),{},{key:e.label}))})),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){return Object(m.jsxs)("div",{children:[e.label,":"," "," ",Object(m.jsx)("input",Object(o.a)({},e))]})},x=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return Object(i.createElement)(g,Object(o.a)(Object(o.a)({},e),{},{key:e.name,handleDelete:t}))}))},g=function(e){var n=e.name,t=e.number,r=e.handleDelete;return Object(m.jsxs)("div",{children:[n," ",t," ",Object(m.jsx)(k,{text:"delete",handleClick:r(n)})]})},k=function(e){var n=e.text,t=e.handleClick;return Object(m.jsx)("button",{onClick:t,children:n})},w=function(e){var n=e.msg,t=e.color;return void 0===n?null:Object(m.jsx)("div",{className:"notification",style:{color:t},children:n})},S=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(t),l=Object(a.a)(c,2),d=l[0],b=l[1],j=Object(i.useState)(""),g=Object(a.a)(j,2),k=g[0],S=g[1],y=Object(i.useState)(""),C=Object(a.a)(y,2),D=C[0],E=C[1],A=Object(i.useState)(""),H=Object(a.a)(A,2),I=H[0],J=H[1],N=Object(i.useState)(null),B=Object(a.a)(N,2),P=B[0],R=B[1],T=function(e){return function(n){return e(n.target.value)}},U=function(e){var n;return null===(n=t.find((function(n){return n.name===e})))||void 0===n?void 0:n.id},q=function(e){return r(e),z(k,Object(u.a)(e))};Object(i.useEffect)((function(){f().then(q)}),[]);var z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return S(e),b(""===e?Object(u.a)(n):n.filter((function(n){return n.name.match(new RegExp(e,"i"))})))};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(p,{label:"filter",value:k,onChange:function(e){return z(e.target.value)}}),Object(m.jsx)(w,Object(o.a)({},P)),Object(m.jsx)("h2",{children:"Add a new"}),Object(m.jsx)(v,{onSubmitHandler:function(e){e.preventDefault();var n={name:D,number:I,id:U(D)},r=function(e){return q(e),E(""),J("")},c=function(e,n){return R({msg:e,color:n}),setTimeout((function(){return R(null)}),3e3)},u=function(e){return r(t.concat(e)),c("Added ".concat(e.name))};void 0===n.id?s(n).then(u):window.confirm(function(e){return"".concat(e.name," is already added to phonebook, replace the old number with a new one?")}(n))&&O(n).then((function(e){return r((n=e,t.map((function(e){return e.id!==n.id?e:n})))),c("Updated ".concat(e.name));var n})).catch((function(){return c("Information of ".concat(n.name," has already been removed from the server"),"red")}))},inputs:[{label:"name",value:D,onChange:T(E)},{label:"number",value:I,onChange:T(J)}]}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{persons:d,handleDelete:function(e){return function(){return window.confirm("Delete ".concat(e,"?"))?h(U(e)).then((function(){return q(t.filter((function(n){return n.name!==e})))})):void 0}}})]})};t(45);c.a.render(Object(m.jsx)(S,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.06b2c878.chunk.js.map